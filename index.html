<!doctype html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <!--

TRASH MAGIC!

PUBLIC DOMAIN NO COPYRIGHT!

SELF-REPLICATING HTML!

CAPS LOCK ALWAYS ON!


...
   -->
   <!--Stop Google:-->
   <META NAME="robots" CONTENT="noindex,nofollow">

<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAZ4efAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAEREBERABEQAREAAREAEREQERAREBERERERERERERERERAAABEREREREBEQEREREQEQEBAREBEQABAQEBEAAREBEBAQERAREREQERAREREREQAAAAEREREREQABERERERAREREQEREQAREQEREAERABEQABEQAREREREBEREREAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rel="icon" type="image/x-icon">
   <title>TRASH MAGIC!</title>    
   <script src = "trashmagic.js"></script>
   <link rel="stylesheet" href="trashmagic.css">
   <script src = "https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>    
    <A HREF= "../">../</A>
    <DIV ID  ="qrcode"></DIV>
    <a href = "qrcode.html">QR CODE!</a>
    <A HREF = "image-feed.html">IMAGE FEED!</A>
    <a href = "edit-index.html">EDIT THIS PAGE!</a>
    <A href = "cardboard-sign.html">DRAW!</A>
    <a href= "geometron.html">GEOMETRON!</a>
    <A HREF = "branch.html">BRANCH!</A>
    <h1>WRITE ON THE SIGN!</h1>
    <TEXTAREA ID = "wall"></TEXTAREA>

    <div id = "branches"></div>

    <div id = "image-feed"></div>

<style>
#image-feed img{
    border:solid;
    border-radius:1em;
    border-width:5px;
}
button{
    font-size:2em;
}
li{
    margin-top:0.25em;
    margin-bottom:0.25em;
    border-radius:0.125em;
}
.link-delete-button{
    border:solid;
    border-radius:5px;
    border-color:red;
    cursor:pointer;
    color:red;
    text-align:center;
    width:40%;
    font-size:2em;
    position:relative;
    top:5em;
    left:5em;
}
.CARDBOARD-SIGN A{
    COLOR:black;
}
.CARDBOARD-SIGN{
    MAX-WIDTH:90%;   
    MARGIN:AUTO;
    MARGIN-TOP:2EM;
    border-top:solid;
    MARGIN-BOTTOM:1EM;
    OVERFLOW:SCROLL;
    FONT-SIZE:1EM;
}
.button{
    cursor:pointer;
}
.button:hover{
    background-color:green;
}
.button:active{
    background-color:yellow;
}
.timestampdata{
    display:none;
}
table, form{
    FONT-FAMILY:COMIC SANS MS;
    BACKGROUND-COLOR:#9f8767;
}
#fileToUpload{
    cursor:pointer;
}
#submitinput{
    cursor:pointer;
}
#newlinkinput{
    background-color:black;
    color:#00ff00;
    font-family:Courier;
    font-size:1em;
}
#wall{
    width:80%;
    display:block;
    margin:auto;
    border:solid;
    FONT-FAMILY:COMIC SANS MS;
    BACKGROUND-COLOR:#9f8767;
    font-size:2em;
    height:20em;
    padding:0.5em 0.5em 0.5em 0.5em;
    border-radius:0.5em;
}
#terminal{
    width:80%;
    display:block;
    margin:auto;
    border:solid;
    FONT-FAMILY:Courier;
    BACKGROUND-COLOR:black;
    color:#00ff00;
    font-size:2em;
    height:20em;
    padding:0.5em 0.5em 0.5em 0.5em;
    border-radius:0.5em;
}
</style>
<script>

titles = document.getElementsByTagName("H1");
for(var index = 0;index < titles.length;index++){
    rainbowstring(titles[index]);    
}
rainbow(document.getElementsByTagName("A"));

codesquaresize = 170;
marginsize = 40;
fontsize = 12;
//globalurl = "http://www.trashrobot.org/qrcode.html";
globalurl = window.location.href;
qrcode = new QRCode(document.getElementById("qrcode"), {
	text: globalurl,
	width: codesquaresize,
	height: codesquaresize,
	colorDark : "#000000",
	colorLight : "#ffffff",
	correctLevel : QRCode.CorrectLevel.H
});

wall = "";
var httpc = new XMLHttpRequest();
httpc.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        wall = this.responseText;
        document.getElementById("wall").value = wall;  
    }
};
httpc.open("GET", "load-file.php?filename=wall.txt", true);
httpc.send();

document.getElementById("wall").onkeyup = function() {
    wall = this.value;
    data = encodeURIComponent(this.value);
    var httpc = new XMLHttpRequest();
    var url = "save-file.php";        
    httpc.open("POST", url, true);
    httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
    httpc.send("data="+data+"&filename=wall.txt");//send text to save-file.php
}



files = [];

var httpcUpload = new XMLHttpRequest();
httpcUpload.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        files = JSON.parse(this.responseText);
        loadfiles();
    }
};
httpcUpload.open("GET", "list-files.php", true);
httpcUpload.send();

function loadfiles(){
    
    
    for(var index = 0;index < files.length;index++) {
        if(files[index].includes(".png") || files[index].includes(".PNG") || files[index].includes(".jpg") || files[index].includes(".JPG") ||files[index].includes(".jpeg")||files[index].includes(".SVG") ||files[index].includes(".svg") || files[index].includes(".gif") ||files[index].includes(".GIF")){
            
            var newuploadbox = document.createElement("DIV");
            newuploadbox.classList.add("imagebox");
            var newimg = document.createElement("IMG");
            newimg.src = files[index];
            newimg.classList.add("uploadimage");
            newuploadbox.appendChild(newimg);
            document.getElementById("image-feed").appendChild(newuploadbox);
    
        }
    }    


}

directories = [];
var httpc2 = new XMLHttpRequest();
    httpc2.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        directories = JSON.parse(this.responseText);
        for(var index = 0;index < directories.length;index++) {
            var newa = document.createElement("A");
            newa.innerHTML = directories[index] + "/";
            newa.href = directories[index] + "/";
            document.getElementById("branches").appendChild(newa);
        }
        rainbow(document.getElementById("branches").getElementsByTagName("a"));
    }
};

httpc2.open("GET", "list-branches.php", true);
httpc2.send();

</script>
</body>
</html>


    
    
